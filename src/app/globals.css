@import "tailwindcss";

:root {
  --background: 0 0% 100%;
  --foreground: 240 10% 3.9%;
  --card: 0 0% 100%;
  --card-foreground: 240 10% 3.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 240 10% 3.9%;
  --primary: 240 5.9% 10%;
  --primary-foreground: 0 0% 98%;
  --secondary: 240 4.8% 95.9%;
  --secondary-foreground: 240 5.9% 10%;
  --muted: 240 4.8% 95.9%;
  --muted-foreground: 240 3.8% 46.1%;
  --accent: 240 4.8% 95.9%;
  --accent-foreground: 240 5.9% 10%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;
  --border: 240 5.9% 90%;
  --input: 240 5.9% 90%;
  --ring: 240 5% 64.9%;
  --radius: 0.75rem;
}

.dark {
  --background: 240 10% 3.9%;
  --foreground: 0 0% 98%;
  --card: 240 10% 3.9%;
  --card-foreground: 0 0% 98%;
  --popover: 240 10% 3.9%;
  --popover-foreground: 0 0% 98%;
  --primary: 0 0% 98%;
  --primary-foreground: 240 5.9% 10%;
  --secondary: 240 3.7% 15.9%;
  --secondary-foreground: 0 0% 98%;
  --muted: 240 3.7% 15.9%;
  --muted-foreground: 240 5% 64.9%;
  --accent: 240 3.7% 15.9%;
  --accent-foreground: 0 0% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 0% 98%;
  --border: 240 3.7% 15.9%;
  --input: 240 3.7% 15.9%;
  --ring: 240 4.9% 83.9%;
}

@layer base {
  /* Usa CSS directo con tus tokens en vez de @apply */
  *,
  ::before,
  ::after {
    border-color: hsl(var(--border));
  }
  html {
    scroll-behavior: smooth;
  }

  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
  }
}

@layer components {
  /* Tipografía/espacio base */
  .rbc-calendar {
    font-size: 0.95rem;
  }
  .rbc-toolbar {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
  }

  /* Botones de la toolbar más “modernos” */
  .rbc-toolbar button {
    /* equivalente a h-9 px-3 rounded-md border bg-white hover:bg-gray-50 */
    height: 2.25rem;
    padding-inline: 0.75rem;
    border-radius: 0.375rem;
    border: 1px solid #e5e7eb;
    background: #fff;
    transition: background 0.15s ease;
  }
  .rbc-toolbar button:hover {
    background: #f9fafb;
  }
  .rbc-toolbar .rbc-active {
    background: #111827;
    color: #fff;
    border-color: #111827;
  }

  /* Eventos: color y radios */
  .rbc-event {
    background: hsl(var(--primary)); /* usa tu token */
    border-color: hsl(var(--primary));
    border-radius: 0.5rem; /* 8px */
  }
  .rbc-event.rbc-selected {
    background: hsl(var(--primary));
    filter: brightness(0.9);
  }

  /* Hoy y días fuera de rango (mes) */
  .rbc-today {
    background: rgba(59, 130, 246, 0.08);
  } /* azul 500 con 8% */
  .dark .rbc-today {
    background: rgba(59, 130, 246, 0.18);
  }
  .rbc-off-range-bg {
    background: #fafafa;
  }
  .dark .rbc-off-range-bg {
    background: #0f172a;
  }

  /* Fines de semana en vista mes */
  /* .rbc-month-view .rbc-row-bg > *:nth-child(6),
  .rbc-month-view .rbc-row-bg > *:nth-child(7) {
    background: rgba(148, 163, 184, 0.15);
  } */

  /* Mejor borde general */
  .rbc-month-view,
  .rbc-time-view {
    border-radius: 0.75rem; /* 12px */
    border: 1px solid #e5e7eb;
  }
}

/* si usas backdrop del modal nativo en alguna parte: */
dialog::backdrop {
  background: rgba(0, 0, 0, 0.45);
}

/* === Calendario público (mes) — Watermark "OCUPADO" en diagonal === */
.public-calendar .rbc-month-view .is-busy-day {
  position: relative;
  background: hsl(var(--primary) / 0.1); /* leve sombreado de ocupado */
}

/* Borde sutil opcional — quita si no lo quieres */
.public-calendar .rbc-month-view .is-busy-day::after {
  content: "";
  position: absolute;
  inset: 0;
  box-shadow: inset 0 0 0 2px hsl(var(--primary) / 0.16);
  border-radius: 0.25rem;
  pointer-events: none;
}

/* WATERMARK diagonal */
.public-calendar .rbc-month-view .is-busy-day::before {
  content: "RESERVADO"; /* cámbialo a "ocupado" si lo prefieres en minúsculas */
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  pointer-events: none;
  font-weight: 700;
  letter-spacing: 0.15em;
  /* tamaño adaptable para que se lea pero no sature */
  font-size: clamp(10px, 2.2vw, 14px);
  color: hsl(var(--primary) / 0.35);
  transform: rotate(-32deg) scale(1.05);
  /* mejora legibilidad sobre el número del día */
  mix-blend-mode: multiply;
}

/* Modo oscuro: subimos un poco la opacidad para mantener contraste */
.dark .public-calendar .rbc-month-view .is-busy-day::before {
  color: hsl(var(--primary) / 0.45);
}

/* En público ocultamos los chips de eventos y el “+X más” */
.public-calendar .rbc-show-more {
  display: none !important;
}
.public-calendar .rbc-month-view .rbc-event,
.public-calendar .rbc-month-view .rbc-event-content {
  display: none !important;
}
